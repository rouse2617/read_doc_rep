<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>基础命令（汇总） &mdash; 知识库 v1.0 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="关于此文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            知识库
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">语法相关</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#boost">boost</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">分布式基础</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../distributed/index.html">分布式基础</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">书籍记录</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../book_by_study/index.html">DDIA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book_by_study/index.html#c">C++并发编程实践</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">关于我</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">about</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">知识库</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">基础命令（汇总）</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Cpp/shell&amp;&amp; Linux命令 &amp;&amp; docker.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>基础命令（汇总）<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h1>
<blockquote>
<div><p>记录常用的Linux命令</p>
</div></blockquote>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#统计全部文件行数</span>
<span class="c1">#c 统计字节数  l 统计行数   w 统计字数。</span>
-c<span class="w"> </span>统计字节数。
-l<span class="w"> </span>统计行数。
-m<span class="w"> </span>统计字符数。这个标志不能与<span class="w"> </span>-c<span class="w"> </span>标志一起使用。
-w<span class="w"> </span>统计字数。一个字被定义为由空白、跳格或换行字符分隔的字符串。
-L<span class="w"> </span>打印最长行的长度。
-help<span class="w"> </span>显示帮助信息
--version<span class="w"> </span>显示版本信息
wc<span class="w"> </span>-l<span class="w"> </span>*
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="c1">#Linux scp 命令用于 Linux 之间复制文件和目录。</span>
<span class="w"> </span><span class="m">1</span>：<span class="w"> </span>强制scp命令使用协议ssh1
-2：<span class="w"> </span>强制scp命令使用协议ssh2
-4：<span class="w"> </span>强制scp命令只使用IPv4寻址
<span class="c1">#scp /home/space/music/1.mp3 root@www.runoob.com:/home/root/others/music </span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#查看 系统版本 </span>
cat<span class="w"> </span>/proc/version<span class="w">	</span>

g++编译器默认的c++版本

g++<span class="w"> </span>-dM<span class="w"> </span>-E<span class="w"> </span>-x<span class="w"> </span>c++<span class="w"> </span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-F<span class="w"> </span>__cplusplus

C++标准<span class="w">	</span>__cplusplus值
C++<span class="w"> </span><span class="m">11</span><span class="w">	</span>201103L
C++<span class="w"> </span><span class="m">14</span><span class="w">	</span>201402L
C++<span class="w"> </span><span class="m">17</span><span class="w">	</span>201703L
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#disk usage，用来展示磁盘使用量的统计信息，默认du关注文件夹所包含的大小</span>
<span class="c1">#计算当前文件夹的总磁盘占用量, -s选项表示计算总和, -h选项表示以恰当的K/M/G单位展示</span>
<span class="c1"># -s 计算总和 </span>
<span class="c1"># -h 数量转换  k -&gt; M/G</span>
<span class="c1"># -c 展示每个文件的大小 	默认全部遍历（包括文件夹里面的文件，隐藏文件）   </span>
<span class="c1"># --max-depth  设定遍历深度</span>
<span class="c1"># -a 打印 文件夹和文件的信息    </span>
<span class="o">[</span>root@node31<span class="w"> </span>home<span class="o">]</span><span class="c1"># ls</span>
obs-registry-ET-UOS7.3.1.15.tar.gz<span class="w">  </span>upgrade
rpm<span class="w">                                 </span>upgrade-ET-GDS7.2.1.8-ET-GDS7.3.1.13.tar.gz
<span class="o">[</span>root@node31<span class="w"> </span>home<span class="o">]</span><span class="c1"># du -sh</span>
<span class="m">6</span>.3G<span class="w">	</span>.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#查看 centos版本</span>
<span class="o">[</span>root@VM-20-11-centos<span class="w"> </span>etc<span class="o">]</span><span class="c1">#  cat /etc/redhat-release </span>
CentOS<span class="w"> </span>Linux<span class="w"> </span>release<span class="w"> </span><span class="m">8</span>.5.2111
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#列举 启动失败的服务</span>
systemctl<span class="w"> </span>list-units<span class="w"> </span>--state<span class="w"> </span>failed
<span class="c1"># 寻找 服务 </span>
systemctl<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="o">[</span>serviceName<span class="o">]</span>
<span class="c1">#查看服务信息配置</span>
systemctl<span class="w"> </span>cat<span class="w"> </span><span class="o">[</span>serviceName<span class="o">]</span>
<span class="c1">#启动服务背后执行了那些命令？</span>
<span class="c1">#可以 再 /usr/lib/systemd/system 下找到相关脚本</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#快速生成 大文件</span>
dd<span class="w"> </span><span class="k">if</span>
fallocate<span class="w"> </span>-l<span class="w"> </span>1g<span class="w"> </span>file.out
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 浏览大文件是内容时  可以用less，less 不会像 vi一样一下子全部打开，先打开一部分，速度快，方便浏览 </span>
cat<span class="w"> </span>filename<span class="w"> </span><span class="p">|</span><span class="w"> </span>less
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#查看进程开了那些线程</span>
ps<span class="w"> </span>-T<span class="w"> </span>-p<span class="w"> </span>&lt;pid&gt;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#tar 打包目录</span>
tar<span class="w"> </span>-czf<span class="w"> </span><span class="o">{</span>打包的名字<span class="o">}</span><span class="w"> </span><span class="o">{</span>目录名<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#卸载 rpm 包</span>
<span class="w"> </span>rpm<span class="w"> </span>-e<span class="w"> </span>--nodeps<span class="w"> </span><span class="o">{</span>包名<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#看 服务的日志</span>
<span class="w">	</span>journalctl<span class="w"> </span>-u<span class="w"> </span>ceph-48bfd3ff-ff24-444b-8d0f-44f91c5a933a@osd.7.service
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#shlle 中map 用法		</span>


<span class="c1">#1)遍历，根据key找到对应的value</span>
<span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="p">!myMap[*]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$key</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">myMap</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span>
<span class="c1">#2)遍历所有的key</span>
<span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="p">!myMap[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$key</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">myMap</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span>
<span class="c1">#3)遍历所有的value</span>
<span class="k">for</span><span class="w"> </span>val<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">myMap</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$val</span>
<span class="k">done</span>



<span class="o">[</span>root@cdh-143<span class="w"> </span>shell-test<span class="o">]</span><span class="c1"># more map-test.sh</span>
<span class="c1">#!/bin/sh</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;一、定义Map:declare -A myMap=([\&quot;myMap00\&quot;]=\&quot;00\&quot; [\&quot;myMap01\&quot;]=\&quot;01\&quot;)&quot;</span>
<span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span><span class="nv">myMap</span><span class="o">=([</span><span class="s2">&quot;my00&quot;</span><span class="o">]=</span><span class="s2">&quot;00&quot;</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;my01&quot;</span><span class="o">]=</span><span class="s2">&quot;01&quot;</span><span class="o">)</span>
myMap<span class="o">[</span><span class="s2">&quot;my02&quot;</span><span class="o">]=</span><span class="s2">&quot;02&quot;</span>
myMap<span class="o">[</span><span class="s2">&quot;my03&quot;</span><span class="o">]=</span><span class="s2">&quot;03&quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;二、输出所有的key:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="p">!myMap[@]</span><span class="si">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;三、输出所有value:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">myMap</span><span class="p">[@]</span><span class="si">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;四、输出map的长度:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${#</span><span class="nv">myMap</span><span class="p">[@]</span><span class="si">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;五、遍历，根据key找到对应的value:&quot;</span>
<span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="p">!myMap[*]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;key:&quot;</span><span class="nv">$key</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;value:&quot;</span><span class="si">${</span><span class="nv">myMap</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;六、遍历所有的key:&quot;</span>
<span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="p">!myMap[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;key:&quot;</span><span class="nv">$key</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;value:&quot;</span><span class="si">${</span><span class="nv">myMap</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;七、遍历所有value:&quot;</span>
<span class="k">for</span><span class="w"> </span>val<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">myMap</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;value:&quot;</span><span class="nv">$val</span>
<span class="k">done</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#定期执行某个命令，并且这个事会原地刷新，不是那种追加式的</span>
<span class="o">[</span>root@node126<span class="w"> </span>~<span class="o">]</span><span class="c1"># watch</span>

Usage:
<span class="w"> </span>watch<span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span><span class="nb">command</span>

Options:
<span class="w">  </span>-b,<span class="w"> </span>--beep<span class="w">             </span>beep<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>has<span class="w"> </span>a<span class="w"> </span>non-zero<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-c,<span class="w"> </span>--color<span class="w">            </span>interpret<span class="w"> </span>ANSI<span class="w"> </span>color<span class="w"> </span>and<span class="w"> </span>style<span class="w"> </span>sequences
<span class="w">  </span>-d,<span class="w"> </span>--differences<span class="o">[=</span>&lt;permanent&gt;<span class="o">]</span>
<span class="w">                         </span>highlight<span class="w"> </span>changes<span class="w"> </span>between<span class="w"> </span>updates
<span class="w">  </span>-e,<span class="w"> </span>--errexit<span class="w">          </span><span class="nb">exit</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>has<span class="w"> </span>a<span class="w"> </span>non-zero<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-g,<span class="w"> </span>--chgexit<span class="w">          </span><span class="nb">exit</span><span class="w"> </span>when<span class="w"> </span>output<span class="w"> </span>from<span class="w"> </span><span class="nb">command</span><span class="w"> </span>changes
<span class="w">  </span>-n,<span class="w"> </span>--interval<span class="w"> </span>&lt;secs&gt;<span class="w">  </span>seconds<span class="w"> </span>to<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>between<span class="w"> </span>updates
<span class="w">  </span>-p,<span class="w"> </span>--precise<span class="w">          </span>attempt<span class="w"> </span>run<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>precise<span class="w"> </span>intervals
<span class="w">  </span>-t,<span class="w"> </span>--no-title<span class="w">         </span>turn<span class="w"> </span>off<span class="w"> </span>header
<span class="w">  </span>-x,<span class="w"> </span>--exec<span class="w">             </span>pass<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>instead<span class="w"> </span>of<span class="w"> </span><span class="s2">&quot;sh -c&quot;</span>

<span class="w"> </span>-h,<span class="w"> </span>--help<span class="w">     </span>display<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w"> </span>-v,<span class="w"> </span>--version<span class="w">  </span>output<span class="w"> </span>version<span class="w"> </span>information<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>

For<span class="w"> </span>more<span class="w"> </span>details<span class="w"> </span>see<span class="w"> </span>watch<span class="o">(</span><span class="m">1</span><span class="o">)</span>.
You<span class="w"> </span>have<span class="w"> </span>new<span class="w"> </span>mail<span class="w"> </span><span class="k">in</span><span class="w"> </span>/var/spool/mail/root
<span class="o">[</span>root@node126<span class="w"> </span>~<span class="o">]</span><span class="c1"># </span>

<span class="c1">#例子 每隔4s 执行一个命令</span>
<span class="o">[</span>root@node126<span class="w"> </span>~<span class="o">]</span><span class="c1"># watch -n 4  &quot;free -h&quot;</span>

Every<span class="w"> </span><span class="m">4</span>.0s:<span class="w"> </span>free<span class="w"> </span>-h<span class="w">                                             </span>Sat<span class="w"> </span>Mar<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">17</span>:20:27<span class="w"> </span><span class="m">2023</span>
<span class="w">              </span>total<span class="w">        </span>used<span class="w">        </span>free<span class="w">	 </span>shared<span class="w">  </span>buff/cache<span class="w">   </span>available
Mem:<span class="w">           </span><span class="m">3</span>.7G<span class="w">        </span><span class="m">2</span>.0G<span class="w">        </span>251M<span class="w">        </span>249M<span class="w">        </span><span class="m">1</span>.4G<span class="w">        </span><span class="m">1</span>.1G
Swap:<span class="w">            </span>0B<span class="w">          </span>0B<span class="w">          </span>0B
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#去除指定 字符</span>
-c,<span class="w"> </span>--complement：反选设定字符。也就是符合<span class="w"> </span>SET1<span class="w"> </span>的部份不做处理，不符合的剩余部份才进行转换
-d,<span class="w"> </span>--delete：删除指令字符
-s,<span class="w"> </span>--squeeze-repeats：缩减连续重复的字符成指定的单个字符
-t,<span class="w"> </span>--truncate-set1：削减<span class="w"> </span>SET1<span class="w"> </span>指定范围，使之与<span class="w"> </span>SET2<span class="w"> </span>设定长度相等
--help：显示程序用法信息
--version：显示程序本身的版本信息
<span class="o">[</span>root@node61<span class="w"> </span>~<span class="o">]</span><span class="c1"># echo &quot;ssscccc&quot; | tr -d &quot;s&quot;</span>
cccc
<span class="o">[</span>root@node61<span class="w"> </span>~<span class="o">]</span><span class="c1"># </span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>开启<span class="w"> </span>coredump
<span class="c1">#设置 core 文件大小，默认为0</span>
<span class="nb">ulimit</span><span class="w"> </span>-c<span class="w"> </span>unlimited<span class="w"> </span>
<span class="c1">#开启后可设置 core文件生成的格式</span>
sudo<span class="w"> </span>sysctl<span class="w"> </span>-w<span class="w"> </span>kernel.core_pattern<span class="o">=</span>core.%p.%s.%c.%d.%P.%E


<span class="w">			</span>
</pre></div>
</div>
</section>
<section id="shell">
<h1>常用 shell 脚本<a class="headerlink" href="#shell" title="此标题的永久链接"></a></h1>
<section id="id2">
<h2>批量解压   压缩<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>*.tar<span class="k">)</span><span class="p">;</span><span class="k">do</span><span class="w"> </span>tar<span class="w"> </span>xvf<span class="w"> </span><span class="nv">$i</span><span class="p">;</span><span class="k">done</span><span class="w">	</span>
</pre></div>
</div>
</section>
<section id="ls">
<h2>ls显示 路径<a class="headerlink" href="#ls" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find<span class="w"> </span><span class="nv">$PWD</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>ls<span class="w"> </span>-ld<span class="w">  </span><span class="p">|</span>grep<span class="w">  	</span>
</pre></div>
</div>
</section>
</section>
<section id="if-else">
<h1>if else<a class="headerlink" href="#if-else" title="此标题的永久链接"></a></h1>
<section id="id3">
<h2>基本用法<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span>command1
<span class="k">then</span><span class="w"> </span>
<span class="w"> </span>commands
<span class="k">elif</span><span class="w"> </span>command2
<span class="k">then</span><span class="w"> </span>
<span class="w"> </span>more<span class="w"> </span>commands
<span class="k">fi</span>

<span class="c1"># bash shell的if语句会运行if后面的那个命令。如果该命令的退出状态码是0（该命令成功运行），位于then部分的命令就会被执行。如果该命令的退出状态码是其他值</span>
<span class="c1"># comand 会看做一个命令，所以如果用 到什么符号需要注意是否要使用转义字符</span>
<span class="c1">#---------------------------------------------</span>
<span class="c1">#!/bin/bash</span>
<span class="c1">#查看用户是否存在</span>
<span class="nv">testuser</span><span class="o">=</span>root
<span class="k">if</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$root</span><span class="w"> </span>/etc/passwd<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is my first command&quot;</span>
<span class="k">fi</span>
<span class="c1">#----------------------------------------------</span>

<span class="nv">testuser</span><span class="o">=</span>root
<span class="k">function</span><span class="w"> </span>echo_line<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;---------------------------&quot;</span>
<span class="o">}</span>
<span class="c1">#---------------------------------</span>
<span class="c1"># if grep $root /etc/passwd &gt; /dev/null</span>
<span class="c1">#     echo &quot;dd&quot;</span>
<span class="c1"># then</span>
<span class="c1">#     echo &quot;This is my first command&quot;</span>
<span class="c1"># fi</span>

<span class="c1">#---------------------------</span>
<span class="c1">#-eq 等于(equal)</span>
<span class="c1"># if [ &quot;$a&quot; -eq &quot;$b&quot; ]</span>
<span class="c1"># #-ne不等于(no equal)</span>
<span class="c1"># if [ &quot;$a&quot; -ne &quot;$b&quot; ]</span>
<span class="c1"># #-gt大于(greater than)</span>
<span class="c1"># if [ &quot;$a&quot; -gt &quot;$b&quot; ]</span>
<span class="c1"># #-ge大于等于</span>
<span class="c1"># if [ &quot;$a&quot; -ge &quot;$b&quot; ]</span>
<span class="c1"># #-lt小于(less than)</span>
<span class="c1"># if [ &quot;$a&quot; -lt &quot;$b&quot; ]</span>
<span class="c1"># #-le小于等于</span>
<span class="c1"># if [ &quot;$a&quot; -le &quot;$b&quot; ]</span>
<span class="c1"># #&lt;小于(在双括号中使用)</span>
<span class="c1"># ((&quot;$a&quot; &lt; &quot;$b&quot;))</span>
<span class="c1"># #&lt;=小于等于(在双括号中使用)</span>
<span class="c1"># ((&quot;$a&quot; &lt;= &quot;$b&quot;))</span>
<span class="c1"># #&gt;大于(在双括号中使用)</span>
<span class="c1"># ((&quot;$a&quot; &gt; &quot;$b&quot;))</span>
<span class="c1"># #&gt;=大于等于(在双括号中使用)</span>
<span class="c1"># ((&quot;$a&quot; &gt;= &quot;$b&quot;))</span>
<span class="c1">#--------------------------</span>
<span class="nv">USER</span><span class="o">=</span>root
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$USER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$testuser</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>
<span class="k">then</span><span class="w"> </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is not </span><span class="nv">$testuser</span><span class="s2">&quot;</span><span class="w"> </span>
<span class="k">else</span><span class="w"> </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Welcome </span><span class="nv">$testuser</span><span class="s2">&quot;</span><span class="w"> </span>
<span class="k">fi</span>

<span class="c1">#------------------------</span>
<span class="c1">#比较字符</span>
<span class="nv">val1</span><span class="o">=</span>baseball
<span class="nv">val2</span><span class="o">=</span>hocket
<span class="c1">#注意 [后加个空格</span>
<span class="c1">#     此时 &gt; 会当做重定向符号 </span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$val1</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$val1</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$val</span><span class="s2"> is greater thee </span><span class="nv">$val2</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$val</span><span class="s2"> is less then </span><span class="si">${</span><span class="nv">val2</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>
<span class="c1">#添加转移符号 </span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$val1</span><span class="w"> </span><span class="se">\&gt;</span><span class="w"> </span><span class="nv">$val1</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$val</span><span class="s2"> is greater thee </span><span class="nv">$val2</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$val</span><span class="s2"> is less then </span><span class="si">${</span><span class="nv">val2</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>
echo_line

<span class="c1">#检测字符串数量s是否0判断是否为空字符</span>
<span class="nv">val</span><span class="o">=</span><span class="s2">&quot;asfdasf&quot;</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">val</span><span class="si">}</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;string </span><span class="si">${</span><span class="nv">val</span><span class="si">}</span><span class="s2"> is not empty&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The string </span><span class="si">${</span><span class="nv">val</span><span class="si">}</span><span class="s2"> is empty&quot;</span>
<span class="k">fi</span>
echo_line
</pre></div>
</div>
</section>
<section id="id4">
<h2>判断文件操作<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h2>
<blockquote>
<div><p>#判断是否为文件 或者 文件夹，以及文件属性
-d file 检查file是否存在并是一个目录
-e file 检查file是否存在
-f file 检查file是否存在并是一个文件
-r file 检查file是否存在并可读
-s file 检查file是否存在并非空
-w file 检查file是否存在并可写
-x file 检查file是否存在并可执行
-O file 检查file是否存在并属当前用户所有
-G file 检查file是否存在并且默认组与当前用户相同
file1 -nt file2 检查file1是否比file2新
file1 -ot file2 检查file1是否比file2旧</p>
<p>参数很多，但还是很好记 的目录的单词是 director 就是 -d 以此类推jump_directory=/home/shell</p>
</div></blockquote>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#这是一些 实践</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">jump_directory</span><span class="si">}</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The </span><span class="nv">$jump_directory</span><span class="s2"> directory exists&quot;</span>
<span class="w">    </span>ls
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;not exist&quot;</span>
<span class="k">fi</span><span class="w"> </span>

<span class="nv">file_name</span><span class="o">=</span>h.sh
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">$file_name</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ok the </span><span class="nv">$file_name</span><span class="s2"> is exist&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file_name</span><span class="s2"> if not exist&quot;</span>
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span>-x<span class="w"> </span><span class="nv">$file_name</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; </span><span class="nv">$file_name</span><span class="s2"> is &quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file_name</span><span class="s2">&quot;</span>
<span class="k">fi</span>


<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; 复合条件测试   布尔运算  || &amp;&amp; &quot;</span>

<span class="nv">file_name</span><span class="o">=</span>h.sh

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;判断是文件是否满足 是可执行文件而且是可读的&quot;</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-x<span class="w"> </span><span class="si">${</span><span class="nv">file_name</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-r<span class="w"> </span><span class="si">${</span><span class="nv">file_name</span><span class="si">}</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;都满足&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;不满足&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
</section>
<section id="case">
<h2>case<a class="headerlink" href="#case" title="此标题的永久链接"></a></h2>
<blockquote>
<div><p>当出现大量的 if else if esle 时 可以用  case   类比于 C语言的  switch case</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="for-while">
<h1>循环结构 for while<a class="headerlink" href="#for-while" title="此标题的永久链接"></a></h1>
<section id="for">
<h2>for<a class="headerlink" href="#for" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>var<span class="w"> </span><span class="k">in</span><span class="w"> </span>*list*<span class="w"> </span>
<span class="k">do</span><span class="w"> </span>
<span class="w"> </span>*commands*<span class="w"> </span>
<span class="k">done</span><span class="w"> </span>
<span class="c1">#这里的 list 可以是个数组，命令....</span>
</pre></div>
</div>
<ul>
<li><p>list是多串字符时,  list 使用空格划分这些字符串，如果字符有空格需要用双引号隔开来</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>abc<span class="w"> </span>def<span class="w"> </span>hih<span class="w"> </span><span class="s2">&quot;afas sdaf&quot;</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">	</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$test</span>
<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>list 也可以是 个变量 （如字符数组）</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">strs</span><span class="o">=</span><span class="s2">&quot;my name is rui&quot;</span>
<span class="k">for</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$strs</span>
<span class="k">do</span>
<span class="w">	</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$test</span>
<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>从命令总读取值</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#遍历ls的每个输出</span>
<span class="k">for</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="k">)</span><span class="w"> </span>
<span class="k">do</span><span class="w">  </span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$test</span>
<span class="k">done</span>
<span class="c1"># 这里输入默认遍历方式以空格隔开为主</span>
<span class="c1"># 如果想以换行为分割符号的话</span>
<span class="c1"># INS 内部字段分隔符（internal field separator） </span>
<span class="c1">#是一种 set 变量，当 shell 处理&quot;命令替换&quot;和&quot;参数替换&quot;时，shell 根据 IFS 的值，默认是 space, tab, newline 来拆解读入的变量，然后对特殊字符进行处理，最后重新组合赋值给该变量。</span>
<span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n\n&#39;</span><span class="w">  </span>
<span class="k">for</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>-la<span class="k">)</span><span class="w"> </span>
<span class="k">do</span><span class="w">  </span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$test</span>
<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>自动读取文件列表</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># list 也可以是个路径，遍历是会自动遍历文件夹下的内容</span>

<span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/shell/*
<span class="k">do</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2"> is a file&quot;</span><span class="w"> </span>
<span class="w">    </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2"> is directory&quot;</span>
<span class="w">    </span><span class="k">fi</span>

<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>按照C语言风格写 for</p>
<p>这里要注意的是 符号的直接的空格，shell 对这个要求很好</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#for (( i=1; i &lt;= 10; i++ ) ) 最后面读了个空格就不行了</span>
<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span>
<span class="k">do</span>
<span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2"> &quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>随机书生成</p>
<p>{0..9} 指定范围 {begin..end}</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for i in {0..9};do echo $RANDOM;done
</pre></div>
</div>
</li>
</ul>
</section>
<section id="while">
<h2>while<a class="headerlink" href="#while" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>
<span class="k">do</span><span class="w"> </span>
<span class="w"> </span>other<span class="w"> </span>commands<span class="w"> </span>
<span class="k">done</span>
<span class="c1">#和C语言的差不多，就是表达形式有不同</span>
<span class="c1">#这里test command可以由多条组成</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#逐行读取</span>
cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>LINE<span class="w"> </span>
<span class="k">do</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$LINE</span><span class="w"> </span>
<span class="k">done</span>
<span class="w"> </span>
</pre></div>
</div>
</section>
</section>
<section id="docker">
<h1>docker 命令<a class="headerlink" href="#docker" title="此标题的永久链接"></a></h1>
<ul>
<li><p>主机关机后，docker 容器启动方法</p>
<p>找到没启动的容器，记下  其ID</p>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>bash-4.2$<span class="w"> </span>docker<span class="w"> </span>container<span class="w"> </span>ls<span class="w"> </span>-a
CONTAINER<span class="w"> </span>ID<span class="w">        </span>IMAGE<span class="w">                                                  </span>COMMAND<span class="w">                  </span>CREATED<span class="w">             </span>STATUS<span class="w">                      </span>PORTS<span class="w">                     </span>NAMES
41cb44ca7917<span class="w">        </span>6a60c3ae21e8<span class="w">                                           </span><span class="s2">&quot;/bin/bash -c cat ...&quot;</span><span class="w">   </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">          </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">143</span><span class="o">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">                               </span>debug_ceph_core
a2b88e93a4d3<span class="w">        </span>hub.expontech.com/obs-ceph/obs-ceph-utils:2023022020<span class="w">   </span><span class="s2">&quot;/bin/bash -c cat ...&quot;</span><span class="w">   </span><span class="m">9</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">          </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">255</span><span class="o">)</span><span class="w"> </span><span class="m">20</span><span class="w"> </span>years<span class="w"> </span>ago<span class="w">  </span>
.....


docker<span class="w"> </span>update<span class="w"> </span>--restart<span class="o">=</span>always<span class="w">  </span><span class="o">{</span>容器id<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>删除容器 rmi</p></li>
</ul>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>rmi<span class="w"> </span><span class="o">{</span>容器名字<span class="o">}</span><span class="w"> </span>
</pre></div>
</div>
</section>
<section id="id5">
<h1>网络工具<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h1>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ss<span class="w"> </span>
<span class="c1">#ss 命令用来显示处于活动状态的套接字信息。ss 命令可以用来获取 socket 统计信息，它可以显示和 netstat 类似的内容。但ss的优势在于它能够显示更多更详细的有关 TCP 和连接状态的信息，而且比 netstat 更快速更高效。</span>

<span class="c1">#显示所有的tcp</span>
ss<span class="w"> </span>-t<span class="w"> </span>-a
</pre></div>
</div>
</section>
<section id="id6">
<h1>三剑客<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h1>
<section id="grep">
<h2>grep<a class="headerlink" href="#grep" title="此标题的永久链接"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">   </span>grep<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;待查找内容&quot;</span><span class="w"> </span>./
<span class="w">   </span>
<span class="w">   </span><span class="c1">#打印出 查找内容所在行上下几行</span>
<span class="w">   </span><span class="c1"># -A  ahead </span>
<span class="w">   </span><span class="c1"># -B  Behide</span>
<span class="w">   </span><span class="c1"># -C  上下都打印</span>
<span class="w">   </span><span class="c1">#打印匹配行的前5行</span>
<span class="w">    </span>grep<span class="w"> </span>-A<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="w"> </span>catalina.out
<span class="w">   </span><span class="c1">#打印匹配行的后5行</span>

<span class="w">    </span>grep<span class="w"> </span>-B<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="w"> </span>catalina.out

<span class="w">    </span><span class="c1">#打印匹配行的前后5行</span>
<span class="w">    </span>shell&gt;<span class="w"> </span>grep<span class="w"> </span>-C<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="w"> </span>catalina.out
<span class="w">    </span>
<span class="w">    </span><span class="c1">#打印出 匹配到的内容 </span>
<span class="w">    </span>grep<span class="w"> </span>-o<span class="w"> </span>
<span class="w">    </span>
<span class="w">    </span>
<span class="w">    </span>
</pre></div>
</div>
</section>
<section id="awk">
<h2>awk<a class="headerlink" href="#awk" title="此标题的永久链接"></a></h2>
<blockquote>
<div><p>逐行读入，默认有空格为分隔符，将每行切片，最后再进行各种分析处理</p>
<p><strong>gawk</strong> <em>options program file</em></p>
</div></blockquote>
<ul class="simple">
<li><p>$0代表整个文本行，$1代表第一个数据段</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># awk &#39;{print $n}&#39; boot.log </span>
Jul<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">15</span>:27:22<span class="w"> </span>node254<span class="w"> </span>NET<span class="o">[</span><span class="m">897</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">09</span>:30:51<span class="w"> </span>node1<span class="w"> </span>NET<span class="o">[</span><span class="m">866</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">12</span>:27:43<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">814</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">15</span>:44:38<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">846</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">13</span>:25:33<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">849</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">10</span>:43:07<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">842</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">12</span>:00:22<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">843</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf
Jul<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">21</span>:11:11<span class="w"> </span>node29<span class="w"> </span>NET<span class="o">[</span><span class="m">846</span><span class="o">]</span>:<span class="w"> </span>/etc/sysconfig/network-scripts/ifup-post<span class="w"> </span>:<span class="w"> </span>updated<span class="w"> </span>/etc/resolv.conf

<span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># awk &#39;{print $1 &quot;  &quot;$2 }&#39; boot.log </span>
Jul<span class="w">  </span><span class="m">4</span>
Jul<span class="w">  </span><span class="m">8</span>
Jul<span class="w">  </span><span class="m">8</span>
Jul<span class="w">  </span><span class="m">12</span>
Jul<span class="w">  </span><span class="m">13</span>
Jul<span class="w">  </span><span class="m">14</span>
Jul<span class="w">  </span><span class="m">14</span>
Jul<span class="w">  </span><span class="m">14</span>
<span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># </span>
</pre></div>
</div>
<ul>
<li><p>awk 模糊匹配某一列</p>
<p>需求:  用awk筛选出 包含 指定字符的行，并打印出改行的指定列
思路：awk是一行一行读取的，读取一行时候 可以定位到哪一列，然后用内置函数 match去模糊匹配去判断是否满足要求，当然一开始也可以直接用 正则筛选，但经过一些筛选之后得出来的结果再用正则呢，这时就得用内部的match函数了</p>
<blockquote>
<div><p><strong>match(s, r [, a])</strong></p>
<p>Return  the  position  in s where the regular expression r occurs, or 0 if r is not present, and set the values of RSTART and RLENGTH.  Note that the argument order is the same as for the ~ operator: str ~ re.  If  array  a  is  provided, a is cleared and then elements 1 through n are filled with the portions of s that match the corresponding parenthesized subexpression in r.  The 0’th element of a contains the  por‐tion of s matched by the entire regular expression r.  Subscripts a[n, “start”], and a[n, “length”] pro‐vide the starting index in the string and length respectively, of each matching substring.</p>
</div></blockquote>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#	对某一个列做正则匹配</span>
<span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># echo &quot;hrp qep&quot; | awk &#39; { if(match($2,/hr./))  print &quot;匹配成功&quot;}&#39;</span>
<span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># echo &quot;hrp qep&quot; | awk &#39; { if(match($1,/hr./))  print &quot;匹配成功&quot;}&#39;</span>
匹配成功
<span class="o">[</span>root@node29<span class="w"> </span>shell<span class="o">]</span><span class="c1"># </span>
</pre></div>
</div>
<ul class="simple">
<li><p>awk有很多内部处理函数，遇到比较棘手的问题，可以看看有没有相应的内部函数可以处理</p></li>
</ul>
</section>
<section id="sed">
<h2>sed<a class="headerlink" href="#sed" title="此标题的永久链接"></a></h2>
<blockquote>
<div><p>sed编辑器被称作流编辑器（stream editor）
(1) 一次从输入中读取一行数据。
(2) 根据所提供的编辑器命令匹配数据。
(3) 按照命令修改流中的数据。
(4) 将新的数据输出到STDOUT。(不会修改原来色数据)</p>
<p><strong>sed</strong> <em>options script file</em></p>
  <img src="C:\Users\h00165\AppData\Roaming\Typora\typora-user-images\image-20220718150023947.png" alt="image-20220718150023947" style="zoom:50%;" />	</div></blockquote>
<ul>
<li><p>替换文本</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># -s </span>
<span class="c1"># -s/待替换内容 /替换的内容/</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is a test\&quot; | sed &#39;s/test/big test/&#39;</span>
<span class="s2">ls -la | sed s&#39;/root/特级用户/&#39;</span>
<span class="s2">#g</span>
</pre></div>
</div>
</li>
<li><p>按行号去</p></li>
<li><p>尾部插入文本</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;$ a\content&#39;</span> <span class="n">filename</span>
</pre></div>
</div>
</li>
<li><p>sed -n ‘1,3p’ boot.log</p></li>
</ul>
<hr class="docutils" />
<p>常用命令（win）</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span>netsh wlan show profiles
netsh wlan show profiles {wifi名字} key=clear  #可以看到 wifi密码
28-CD-C4-18-D7-1F


知道端口号
netstat -ano | findstr [端口号]
C:\Users\h00165&gt;netstat -ano | findstr 38020
  TCP    0.0.0.0:38020          0.0.0.0:0              LISTENING       28592
  TCP    [::]:38020             [::]:0                 LISTENING       28592
最后面是 pid，根据pid 任务管理器 kill 掉
</pre></div>
</div>
<p>/usr/bin/findmnt</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, rui.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>